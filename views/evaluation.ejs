<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='/stylesheets/bootstrap-3.3.7.min.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body class="base-bg">
  <div class="top-wrapper">
    <div class="container top-panel">
      <div class="top-left">
        <h3>IoT-SNN DashBoard</h3>
        <ul class="top-menu">
          <li><a href="/">Dashboard</a></li>
          <li><a href="/evaluation">Evaluation</a></li>
        </ul>
      </div>
      <div class="top-right">
        <label>2019-11-07 22:01:00</label>
      </div>
    </div>
  </div>
  <div class="wrapper">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <div class="ibox">
            <div class="ibox-title">
              <h5>Sensor Period Control</h5>
            </div>
            <div class="ibox-content">
              <div id="chart-1" style="height: 410px;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/javascripts/jquery-1.12.4.min.js"></script>
  <script src="/javascripts/bootstrap-3.3.7.min.js"></script>
  <script src="/javascripts/echart-4.4.0.min.js"></script>
  <script>
    let loop = null;

    $(document).ready(function() {

      // Data
      const series = JSON.parse('<%- series %>');
      console.log(series);

      // Chart
      const chartPc = echarts.init(document.getElementById('chart-1'));
      const chartPc_opt = {
        xAxis: [{
          type: "time",
          data: null
        }],
        yAxis: [{

        }],
        series: series,
        color: ["#33e69e", "#33e69e", "#33e69e", "#33e69e", "#1b5e20", "#1b5e20", "#1b5e20", "#1b5e20"]
      };
      chartPc.setOption(chartPc_opt);

      loop = setInterval(function() {
        $.get("/next/pc", function(result) {
          chartPc.setOption({ series: result.series });
        })
      }, 10000);

    });
  </script>
  </body>
</html>